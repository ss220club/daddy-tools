#include "common.dm"

var/input = "Сука Гооооооооооооооол в гооооландские ворота."
var/pattern = @"\bго+л\b"
var/pattern_flags = "i"
var/replacement = "попадание мячем"

var/expected_output = "Сука попадание мячем в гооооландские ворота."

/test/proc/test_regexp_replace()
    var/output = rustutils_regex_replace(input, pattern, pattern_flags, replacement)
    ASSERT(output == expected_output)

/test/proc/test_regex_time()
    var/start = world.timeofday
    for(var/i in 1 to 1000)
        var/output = rustutils_regex_replace(input, pattern, pattern_flags, replacement)
    var/end = world.timeofday
    ASSERT(end - start < 10)
